<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="화홍고 시간표 및 급식표">
    <meta property="og:description" content="Hwahong High School Timetable and MealTable">
    <meta property="og:image" content="previewimage.png">
    <meta property="og:url" content="https://hwahong.pages.dev">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="10217 이한결">
    <meta property="og:locale" content="ko_KR">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대충 만드는 화홍고 시간표 및 급식표</title>
    <style>
        /* CSS 코드는 그대로 유지됩니다. */
    </style>
</head>
<body style="overflow:auto">
    <h1>화홍고 시간표 및 급식표</h1>
    <div id="current-date" class="date-display"></div>
    <form id="schedule-form">
        <label for="grade">학년:</label>
        <select id="grade" class="styled-select">
            <option value="1">1학년</option>
            <option value="2">2학년</option>
            <option value="3">3학년</option>
        </select>
        <label for="class_num">반:</label>
        <select id="class_num" class="styled-select">
            <option value="1">1반</option>
            <option value="2">2반</option>
            <option value="3">3반</option>
            <option value="4">4반</option>
            <option value="5">5반</option>
            <option value="6">6반</option>
            <option value="7">7반</option>
            <option value="8">8반</option>
            <option value="9">9반</option>
            <option value="10">10반</option>
            <option value="11">11반</option>
            <option value="12">12반</option>
        </select>
        <button type="button" onclick="fetchData()" class="styled-button">조회</button>
        <button type="button" onclick="fetchWeeklyData()" class="styled-button">일주일</button>
    </form>

    <div id="result">
        <h2>시간표</h2>
        <div id="schedule"></div>
        <h2>급식표</h2>
        <ul id="meal"></ul>
    </div>
    
    <div class="name">
        10217 이한결
    </div>
    
    <script>
    function displayWeeklyData(scheduleData, mealData) {
    const scheduleTable = document.createElement('table');
    scheduleTable.classList.add('weekly-schedule'); // 표에 클래스 추가

    const days = ['월', '화', '수', '목', '금'];
    const periods = ['1교시', '2교시', '3교시', '4교시', '5교시', '6교시', '7교시', '8교시'];

    // 표 헤더 생성
    const thead = document.createElement('thead');
    const headerRow = document.createElement('tr');
    const emptyHeader = document.createElement('th');
    headerRow.appendChild(emptyHeader);
    days.forEach(day => {
        const th = document.createElement('th');
        th.textContent = day;
        headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    scheduleTable.appendChild(thead);

    // 표 내용 생성
    const tbody = document.createElement('tbody');
    periods.forEach((period, index) => {
        const row = document.createElement('tr');
        const periodCell = document.createElement('th');
        periodCell.textContent = period;
        row.appendChild(periodCell);

        days.forEach((day, dayIndex) => {
            const cell = document.createElement('td');
            const daySchedule = scheduleData.hisTimetable[1].row.filter(item => {
                const date = item.ALL_TI_YMD;
                const dayOfWeek = new Date(date.slice(0, 4), date.slice(4, 6) - 1, date.slice(6, 8)).getDay();
                return dayOfWeek === dayIndex + 1 && item.PERIO === `${index + 1}교시`;
            });

            if (daySchedule.length > 0) {
                cell.textContent = daySchedule[0].ITRT_CNTNT;
            } else {
                cell.textContent = '';
            }

            row.appendChild(cell);
        });

        tbody.appendChild(row);
    });

    scheduleTable.appendChild(tbody);

    const scheduleDiv = document.getElementById('schedule');
    scheduleDiv.innerHTML = ''; // 이전 내용 지우기
    scheduleDiv.appendChild(scheduleTable);
    }
    </script>
</body>
</html>
